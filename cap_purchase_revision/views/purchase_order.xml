<odoo>
	<data>
		<record id="cap_purchase_revision_purchase_order_form" model="ir.ui.view">
			<field name="name">cap.purchase.revision.purchase.order.form</field>
			<field name="model">purchase.order</field>
			<field name="inherit_id" ref="purchase.purchase_order_form" />
			<field name="arch" type="xml">
				<xpath expr="//button[@name='button_draft']" position="after">
					<button name="button_revise"
							type="object" 
							string="Revise"
							class="btn btn-primary"
							invisible="state != 'cancel' or revision_id != False"
							data-hotkey="r"/>
				</xpath>

				<xpath expr="//field[@name='picking_type_id']" position="after">
					<field name="source_id" 
						   invisible="source_id == False" 
						   readonly="1"/>
					<field name="revision_id" 
						   invisible="revision_id == False" 
						   readonly="1"/>
					<field name="previous_revision_ids"
						   invisible="1"
						   readonly="1"/>
				</xpath>

				<xpath expr="//button[@name='action_view_invoice']" position="after">
					<button
						name="action_view_revisions"
						type="object"
						class="oe_stat_button"
						icon="fa-file-archive-o"
						invisible="not previous_revision_ids or previous_revision_count == 0">
						<field
							name="previous_revision_count"
							widget="statinfo"
							string="Prev. revisions"
						/>
					</button>
				</xpath>
			</field>
		</record>
	</data>
</odoo>
